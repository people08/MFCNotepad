# MFC多文档记事本编辑器 - 开发指南

## 功能清单
- ✅ 多文档管理（标签页显示文件名）
- ✅ 撤销/重做
- ✅ 正则表达式搜索/替换
- ✅ 行号显示
- ✅ 暗色/亮色主题切换
- ✅ 字体大小调节

---

## 快速开始

### 第1步：创建MFC MDI项目

1. 打开 **Visual Studio 2019/2022**
2. 文件 → 新建 → 项目 → 搜索 **MFC应用程序**
3. 项目名：`MFCNotepad`，点击创建
4. 向导设置：
   - 应用程序类型：选择 **多个文档**
   - 项目样式：**MFC标准** 或 **Visual Studio**
   - 勾选：**文档/视图架构支持**
   - 完成

### 第2步：替换/添加代码文件

将提供的代码文件内容复制到对应文件中：

```
MFCNotepad/
├── stdafx.h          (或pch.h，保持向导生成的即可)
├── Resource.h        ← 替换
├── MFCNotepad.h      ← 替换
├── MFCNotepad.cpp    ← 替换
├── MainFrm.h         ← 替换
├── MainFrm.cpp       ← 替换
├── ChildFrm.h        ← 替换
├── ChildFrm.cpp      ← 替换
├── MFCNotepadDoc.h   ← 替换
├── MFCNotepadDoc.cpp ← 替换
├── MFCNotepadView.h  ← 替换
├── MFCNotepadView.cpp← 替换
└── MFCNotepad.rc     ← 替换资源脚本
```

### 第3步：配置项目属性

1. 右键项目 → 属性
2. 字符集：**使用Unicode字符集**
3. MFC的使用：**在共享DLL中使用MFC**

### 第4步：编译运行

按 **F7** 编译，**F5** 运行

---

## 快捷键一览

| 功能 | 快捷键 |
|------|--------|
| 新建文档 | Ctrl+N |
| 打开文件 | Ctrl+O |
| 保存 | Ctrl+S |
| 撤销 | Ctrl+Z |
| 重做 | Ctrl+Y |
| 查找 | Ctrl+F |
| 替换 | Ctrl+H |
| 增大字体 | Ctrl+= |
| 减小字体 | Ctrl+- |

---

## 功能使用说明

### 1. 多文档管理
- 每个打开的文件显示为一个标签页
- 标签页显示文件名，修改后显示 * 号
- 点击标签切换文档

### 2. 主题切换
- 菜单：**视图 → 亮色主题** 或 **暗色主题**
- 亮色：白底黑字
- 暗色：深灰底浅灰字

### 3. 行号显示
- 菜单：**视图 → 显示行号**（切换开关）
- 行号显示在编辑区左侧

### 4. 正则搜索/替换
- 按 Ctrl+F 或 Ctrl+H 打开对话框
- 勾选"正则表达式"启用
- 示例：`\d+` 匹配数字，`[a-z]+` 匹配小写字母

### 5. 字体调节
- Ctrl+= 或 菜单增大
- Ctrl+- 或 菜单减小
- 范围：8-72磅

---

## 代码结构说明

```
类层次结构：

CMFCNotepadApp          // 应用程序入口
    │
    └── CMainFrame      // MDI主窗口（菜单、工具栏、标签页）
            │
            └── CChildFrame     // MDI子窗口
                    │
                    └── CMFCNotepadView  // 编辑视图（核心）
                            │            - 行号绘制
                            │            - 主题颜色
                            │            - 字体管理
                            │
                            └── CMFCNotepadDoc   // 文档数据
                                                 - 文本内容
                                                 - 撤销/重做栈
```

---

## 常见问题

**Q: 编译报错找不到MFC头文件？**
A: VS安装时需勾选"MFC和ATL支持"组件

**Q: 中文乱码？**
A: 确保使用Unicode字符集，源文件保存为UTF-8 BOM

**Q: 行号不显示？**
A: 检查视图菜单中"显示行号"是否勾选
